---
import { Image } from 'astro:assets';
import logoIcon from '../assets/brand/logos/mezcalomano_lockup_stacked_dark.svg';
import burgerIcon from '../assets/ui/icons/icon_burger.svg';
import basketIcon from '../assets/ui/icons/icon_shopping-basket.svg';
import MobileNav from './MobileNav.astro';

const currentPath = Astro.url.pathname;
---

<header class="header">
  <div class="header-content">
    <button class="header-burger" id="mobile-nav-toggle" aria-label="Open menu" aria-expanded="false">
      <img src={burgerIcon.src} alt="" />
    </button>

    <a href="/" class="header-logo" aria-label="MezcalÃ³mano Home">
      <img src={logoIcon.src} alt="" />
    </a>
    
    <nav class="header-nav" aria-label="Main navigation">
      <ul class="header-nav-desktop">
        <li><a href="/" class={currentPath === '/' ? 'active' : ''}>HOME</a></li>
        <li><a href="/about" class={currentPath === '/about' ? 'active' : ''}>ABOUT</a></li>
        <li><a href="/contact" class={currentPath === '/contact' ? 'active' : ''}>CONTACT</a></li>
      </ul>
    </nav>

    <a href="https://shop.mezcalomano.com" class="header-shop" aria-label="Shop">
      <img src={basketIcon.src} alt="" />
    </a>
  </div>
</header>

<MobileNav />

<script>
  const toggle = document.getElementById('mobile-nav-toggle');
  const overlay = document.getElementById('mobile-nav-overlay');
  
  if (toggle && overlay) {
    toggle.addEventListener('click', () => {
      const isOpen = overlay.classList.contains('is-open');
      overlay.classList.toggle('is-open');
      toggle.setAttribute('aria-expanded', !isOpen ? 'true' : 'false');
      document.body.style.overflow = !isOpen ? 'hidden' : '';
    });
  }
</script>

